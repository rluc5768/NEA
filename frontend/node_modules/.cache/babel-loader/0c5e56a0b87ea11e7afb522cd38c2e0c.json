{"ast":null,"code":"import { getToken, getStravaToken } from \"../utils/Token\"; //These functions are used to make the other code more readable and shorter.\n\nfunction setHeader(base_url, tokenNeeded) {\n  let header = {\n    \"Content-Type\": \"application/json\"\n  };\n  console.log(base_url.includes(\"localhost\"));\n\n  if (base_url.includes(\"localhost\") && tokenNeeded) {\n    header[\"Authorization\"] = `Bearer ${getToken()}`;\n  } else if (base_url.includes(\"www.strava.com\") && tokenNeeded) {\n    header[\"Authorization\"] = `Bearer ${getStravaToken()}`;\n  }\n\n  return header;\n}\n\nexport async function APIPost(base_url, endpoint, body, tokenNeeded) {\n  let header = setHeader(base_url, tokenNeeded);\n  return fetch(`${base_url}${endpoint}`, {\n    method: \"POST\",\n    headers: header,\n    body: JSON.stringify(body)\n  }).then(data => data.json());\n}\n_c = APIPost;\nexport async function APIGet(base_url, endpoint, tokenNeeded) {\n  //params passed in url\n  let header = setHeader(base_url, tokenNeeded);\n  return fetch(`${base_url}${endpoint}`, {\n    method: \"GET\",\n    headers: header\n  }).then(response => {\n    //https://stackoverflow.com/questions/49902417/how-to-catch-401-error-using-fetch-method-of-javascript\n    if (response.status !== 200) {\n      throw new Error(response.status);\n    }\n  }).catch(error => {\n    console.log(error);\n  });\n}\n_c2 = APIGet;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"APIPost\");\n$RefreshReg$(_c2, \"APIGet\");","map":{"version":3,"sources":["D:/SchoolWork/Computer Science/Year 2/NEA/NEA/frontend/src/External/ApiHelper.js"],"names":["getToken","getStravaToken","setHeader","base_url","tokenNeeded","header","console","log","includes","APIPost","endpoint","body","fetch","method","headers","JSON","stringify","then","data","json","APIGet","response","status","Error","catch","error"],"mappings":"AAAA,SAASA,QAAT,EAAmBC,cAAnB,QAAyC,gBAAzC,C,CACA;;AACA,SAASC,SAAT,CAAmBC,QAAnB,EAA6BC,WAA7B,EAA0C;AACxC,MAAIC,MAAM,GAAG;AACX,oBAAgB;AADL,GAAb;AAGAC,EAAAA,OAAO,CAACC,GAAR,CAAYJ,QAAQ,CAACK,QAAT,CAAkB,WAAlB,CAAZ;;AACA,MAAIL,QAAQ,CAACK,QAAT,CAAkB,WAAlB,KAAkCJ,WAAtC,EAAmD;AACjDC,IAAAA,MAAM,CAAC,eAAD,CAAN,GAA2B,UAASL,QAAQ,EAAG,EAA/C;AACD,GAFD,MAEO,IAAIG,QAAQ,CAACK,QAAT,CAAkB,gBAAlB,KAAuCJ,WAA3C,EAAwD;AAC7DC,IAAAA,MAAM,CAAC,eAAD,CAAN,GAA2B,UAASJ,cAAc,EAAG,EAArD;AACD;;AACD,SAAOI,MAAP;AACD;;AACD,OAAO,eAAeI,OAAf,CAAuBN,QAAvB,EAAiCO,QAAjC,EAA2CC,IAA3C,EAAiDP,WAAjD,EAA8D;AACnE,MAAIC,MAAM,GAAGH,SAAS,CAACC,QAAD,EAAWC,WAAX,CAAtB;AACA,SAAOQ,KAAK,CAAE,GAAET,QAAS,GAAEO,QAAS,EAAxB,EAA2B;AACrCG,IAAAA,MAAM,EAAE,MAD6B;AAErCC,IAAAA,OAAO,EAAET,MAF4B;AAGrCM,IAAAA,IAAI,EAAEI,IAAI,CAACC,SAAL,CAAeL,IAAf;AAH+B,GAA3B,CAAL,CAIJM,IAJI,CAIEC,IAAD,IAAUA,IAAI,CAACC,IAAL,EAJX,CAAP;AAKD;KAPqBV,O;AAQtB,OAAO,eAAeW,MAAf,CAAsBjB,QAAtB,EAAgCO,QAAhC,EAA0CN,WAA1C,EAAuD;AAC5D;AACA,MAAIC,MAAM,GAAGH,SAAS,CAACC,QAAD,EAAWC,WAAX,CAAtB;AACA,SAAOQ,KAAK,CAAE,GAAET,QAAS,GAAEO,QAAS,EAAxB,EAA2B;AACrCG,IAAAA,MAAM,EAAE,KAD6B;AAErCC,IAAAA,OAAO,EAAET;AAF4B,GAA3B,CAAL,CAIJY,IAJI,CAIEI,QAAD,IAAc;AAClB;AACA,QAAIA,QAAQ,CAACC,MAAT,KAAoB,GAAxB,EAA6B;AAC3B,YAAM,IAAIC,KAAJ,CAAUF,QAAQ,CAACC,MAAnB,CAAN;AACD;AACF,GATI,EAUJE,KAVI,CAUGC,KAAD,IAAW;AAChBnB,IAAAA,OAAO,CAACC,GAAR,CAAYkB,KAAZ;AACD,GAZI,CAAP;AAaD;MAhBqBL,M","sourcesContent":["import { getToken, getStravaToken } from \"../utils/Token\";\r\n//These functions are used to make the other code more readable and shorter.\r\nfunction setHeader(base_url, tokenNeeded) {\r\n  let header = {\r\n    \"Content-Type\": \"application/json\",\r\n  };\r\n  console.log(base_url.includes(\"localhost\"));\r\n  if (base_url.includes(\"localhost\") && tokenNeeded) {\r\n    header[\"Authorization\"] = `Bearer ${getToken()}`;\r\n  } else if (base_url.includes(\"www.strava.com\") && tokenNeeded) {\r\n    header[\"Authorization\"] = `Bearer ${getStravaToken()}`;\r\n  }\r\n  return header;\r\n}\r\nexport async function APIPost(base_url, endpoint, body, tokenNeeded) {\r\n  let header = setHeader(base_url, tokenNeeded);\r\n  return fetch(`${base_url}${endpoint}`, {\r\n    method: \"POST\",\r\n    headers: header,\r\n    body: JSON.stringify(body),\r\n  }).then((data) => data.json());\r\n}\r\nexport async function APIGet(base_url, endpoint, tokenNeeded) {\r\n  //params passed in url\r\n  let header = setHeader(base_url, tokenNeeded);\r\n  return fetch(`${base_url}${endpoint}`, {\r\n    method: \"GET\",\r\n    headers: header,\r\n  })\r\n    .then((response) => {\r\n      //https://stackoverflow.com/questions/49902417/how-to-catch-401-error-using-fetch-method-of-javascript\r\n      if (response.status !== 200) {\r\n        throw new Error(response.status);\r\n      }\r\n    })\r\n    .catch((error) => {\r\n      console.log(error);\r\n    });\r\n}\r\n"]},"metadata":{},"sourceType":"module"}