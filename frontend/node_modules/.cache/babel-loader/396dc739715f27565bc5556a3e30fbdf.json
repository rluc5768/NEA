{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rober\\\\Documents\\\\Schoolwork\\\\Computer Science\\\\NEA\\\\FinalNEA\\\\frontend\\\\src\\\\Pages\\\\PrivateOutlet.js\",\n    _s = $RefreshSig$();\n\nimport { Navigate, Outlet } from \"react-router-dom\";\nimport { useState, useEffect } from \"react\";\nimport { useToken } from \"../Hooks/useToken.js\";\nimport Authentication from \"../Services/Authentication\";\nimport React from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction PrivateOutlet() {\n  _s();\n\n  const [State, setState] = useState('loading');\n  const {\n    token,\n    setToken\n  } = useToken();\n  useEffect(() => {\n    (async function () {\n      try {\n        const auth = await Authentication.User(token);\n        console.log(auth);\n        setState(auth ? 'valid' : 'invalid');\n      } catch {\n        setState('invalid');\n      }\n    })();\n  }, []);\n\n  if (State === 'loading') {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"loading\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 15\n    }, this);\n  }\n\n  return State === 'valid' ? /*#__PURE__*/_jsxDEV(Outlet, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 28,\n    columnNumber: 29\n  }, this) : /*#__PURE__*/_jsxDEV(Navigate, {\n    to: \"/login\",\n    setToken: setToken\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 28,\n    columnNumber: 41\n  }, this);\n}\n\n_s(PrivateOutlet, \"ObP7VM5ivNdHeigZU3FA3u7fk2M=\", false, function () {\n  return [useToken];\n});\n\n_c = PrivateOutlet;\nexport default PrivateOutlet;\n\nvar _c;\n\n$RefreshReg$(_c, \"PrivateOutlet\");","map":{"version":3,"sources":["C:/Users/rober/Documents/Schoolwork/Computer Science/NEA/FinalNEA/frontend/src/Pages/PrivateOutlet.js"],"names":["Navigate","Outlet","useState","useEffect","useToken","Authentication","React","PrivateOutlet","State","setState","token","setToken","auth","User","console","log"],"mappings":";;;AAAA,SAASA,QAAT,EAAmBC,MAAnB,QAAiC,kBAAjC;AACA,SAAQC,QAAR,EAAkBC,SAAlB,QAAkC,OAAlC;AACA,SAAQC,QAAR,QAAuB,sBAAvB;AACA,OAAOC,cAAP,MAA2B,4BAA3B;AACA,OAAOC,KAAP,MAAkB,OAAlB;;;AACA,SAASC,aAAT,GAAwB;AAAA;;AACpB,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBP,QAAQ,CAAC,SAAD,CAAlC;AACA,QAAM;AAACQ,IAAAA,KAAD;AAAQC,IAAAA;AAAR,MAAoBP,QAAQ,EAAlC;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACZ,KAAC,kBAAiB;AACd,UAAI;AACA,cAAMS,IAAI,GAAG,MAAMP,cAAc,CAACQ,IAAf,CAAoBH,KAApB,CAAnB;AACAI,QAAAA,OAAO,CAACC,GAAR,CAAYH,IAAZ;AACAH,QAAAA,QAAQ,CAACG,IAAI,GAAG,OAAH,GAAa,SAAlB,CAAR;AACH,OAJD,CAKA,MAAK;AACDH,QAAAA,QAAQ,CAAC,SAAD,CAAR;AACH;AACJ,KATD;AAUH,GAXQ,EAWP,EAXO,CAAT;;AAaD,MAAGD,KAAK,KAAK,SAAb,EAAuB;AACnB,wBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAP;AACH;;AACA,SAEIA,KAAK,KAAK,OAAV,gBAAoB,QAAC,MAAD;AAAA;AAAA;AAAA;AAAA,UAApB,gBAAgC,QAAC,QAAD;AAAU,IAAA,EAAE,EAAC,QAAb;AAAsB,IAAA,QAAQ,EAAEG;AAAhC;AAAA;AAAA;AAAA;AAAA,UAFpC;AAIH;;GAxBQJ,a;UAEqBH,Q;;;KAFrBG,a;AAyBT,eAAeA,aAAf","sourcesContent":["import { Navigate, Outlet } from \"react-router-dom\";\r\nimport {useState, useEffect} from \"react\";\r\nimport {useToken} from \"../Hooks/useToken.js\";\r\nimport Authentication from \"../Services/Authentication\";\r\nimport React from \"react\";\r\nfunction PrivateOutlet(){\r\n    const [State, setState] = useState('loading');\r\n    const {token, setToken} = useToken();\r\n\r\n    useEffect(() => {\r\n        (async function() {\r\n            try {\r\n                const auth = await Authentication.User(token);\r\n                console.log(auth)\r\n                setState(auth ? 'valid' : 'invalid');\r\n            }\r\n            catch{\r\n                setState('invalid');\r\n            }\r\n        })();\r\n    },[]);\r\n    \r\n   if(State === 'loading'){\r\n       return <div>loading</div>;\r\n   }\r\n    return(\r\n        \r\n        State === 'valid' ? <Outlet/> : <Navigate to=\"/login\" setToken={setToken}/>\r\n    );\r\n}\r\nexport default PrivateOutlet;"]},"metadata":{},"sourceType":"module"}