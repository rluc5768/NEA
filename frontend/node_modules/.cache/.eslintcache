[{"C:\\Users\\rober\\Documents\\Schoolwork\\Computer Science\\NEA\\FinalNEA\\frontend\\src\\index.js":"1","C:\\Users\\rober\\Documents\\Schoolwork\\Computer Science\\NEA\\FinalNEA\\frontend\\src\\reportWebVitals.js":"2","C:\\Users\\rober\\Documents\\Schoolwork\\Computer Science\\NEA\\FinalNEA\\frontend\\src\\App.js":"3","C:\\Users\\rober\\Documents\\Schoolwork\\Computer Science\\NEA\\FinalNEA\\frontend\\src\\Hooks\\useToken.js":"4","C:\\Users\\rober\\Documents\\Schoolwork\\Computer Science\\NEA\\FinalNEA\\frontend\\src\\Components\\ComponentImports.js":"5","C:\\Users\\rober\\Documents\\Schoolwork\\Computer Science\\NEA\\FinalNEA\\frontend\\src\\Pages\\PageImports.js":"6","C:\\Users\\rober\\Documents\\Schoolwork\\Computer Science\\NEA\\FinalNEA\\frontend\\src\\Pages\\Home.js":"7","C:\\Users\\rober\\Documents\\Schoolwork\\Computer Science\\NEA\\FinalNEA\\frontend\\src\\Pages\\NotFound.js":"8","C:\\Users\\rober\\Documents\\Schoolwork\\Computer Science\\NEA\\FinalNEA\\frontend\\src\\Pages\\Private.js":"9","C:\\Users\\rober\\Documents\\Schoolwork\\Computer Science\\NEA\\FinalNEA\\frontend\\src\\Pages\\Login.js":"10","C:\\Users\\rober\\Documents\\Schoolwork\\Computer Science\\NEA\\FinalNEA\\frontend\\src\\Pages\\PrivateOutlet.js":"11","C:\\Users\\rober\\Documents\\Schoolwork\\Computer Science\\NEA\\FinalNEA\\frontend\\src\\Pages\\SignUp.js":"12","C:\\Users\\rober\\Documents\\Schoolwork\\Computer Science\\NEA\\FinalNEA\\frontend\\src\\Components\\Map.js":"13","C:\\Users\\rober\\Documents\\Schoolwork\\Computer Science\\NEA\\FinalNEA\\frontend\\src\\Components\\LoadAndSort.js":"14","C:\\Users\\rober\\Documents\\Schoolwork\\Computer Science\\NEA\\FinalNEA\\frontend\\src\\Components\\ActivityList.js":"15","C:\\Users\\rober\\Documents\\Schoolwork\\Computer Science\\NEA\\FinalNEA\\frontend\\src\\Components\\Navbar.js":"16","C:\\Users\\rober\\Documents\\Schoolwork\\Computer Science\\NEA\\FinalNEA\\frontend\\src\\Pages\\Planner.js":"17","C:\\Users\\rober\\Documents\\Schoolwork\\Computer Science\\NEA\\FinalNEA\\frontend\\src\\External\\InputValidationClass.js":"18","C:\\Users\\rober\\Documents\\Schoolwork\\Computer Science\\NEA\\FinalNEA\\frontend\\src\\Services\\Authentication.js":"19","C:\\Users\\rober\\Documents\\Schoolwork\\Computer Science\\NEA\\FinalNEA\\frontend\\src\\Pages\\Account.js":"20","C:\\Users\\rober\\Documents\\Schoolwork\\Computer Science\\NEA\\FinalNEA\\frontend\\src\\Pages\\Tracking.js":"21","C:\\Users\\rober\\Documents\\Schoolwork\\Computer Science\\NEA\\FinalNEA\\frontend\\src\\Pages\\AccountDetails.js":"22","C:\\Users\\rober\\Documents\\Schoolwork\\Computer Science\\NEA\\FinalNEA\\frontend\\src\\utils\\Token.js":"23","C:\\Users\\rober\\Documents\\Schoolwork\\Computer Science\\NEA\\FinalNEA\\frontend\\src\\Pages\\DeleteAccount.js":"24","C:\\Users\\rober\\Documents\\Schoolwork\\Computer Science\\NEA\\FinalNEA\\frontend\\src\\Pages\\ResetPassword.js":"25","C:\\Users\\rober\\Documents\\Schoolwork\\Computer Science\\NEA\\FinalNEA\\frontend\\src\\Pages\\VerifyPasswordReset.js":"26"},{"size":500,"mtime":1645113328321,"results":"27","hashOfConfig":"28"},{"size":362,"mtime":1645113328444,"results":"29","hashOfConfig":"28"},{"size":2323,"mtime":1646356625608,"results":"30","hashOfConfig":"28"},{"size":537,"mtime":1645563441907,"results":"31","hashOfConfig":"28"},{"size":196,"mtime":1645983185805,"results":"32","hashOfConfig":"28"},{"size":699,"mtime":1646343712213,"results":"33","hashOfConfig":"28"},{"size":4998,"mtime":1646303440331,"results":"34","hashOfConfig":"28"},{"size":82,"mtime":1645116478622,"results":"35","hashOfConfig":"28"},{"size":394,"mtime":1646268532527,"results":"36","hashOfConfig":"28"},{"size":1843,"mtime":1646302493051,"results":"37","hashOfConfig":"28"},{"size":958,"mtime":1646265196802,"results":"38","hashOfConfig":"28"},{"size":7268,"mtime":1646341143943,"results":"39","hashOfConfig":"28"},{"size":398,"mtime":1645983185805,"results":"40","hashOfConfig":"28"},{"size":847,"mtime":1645983185805,"results":"41","hashOfConfig":"28"},{"size":232,"mtime":1645983185805,"results":"42","hashOfConfig":"28"},{"size":1913,"mtime":1646301536746,"results":"43","hashOfConfig":"28"},{"size":84,"mtime":1646166114739,"results":"44","hashOfConfig":"28"},{"size":2350,"mtime":1646352102262,"results":"45","hashOfConfig":"28"},{"size":1381,"mtime":1646265223416,"results":"46","hashOfConfig":"28"},{"size":2266,"mtime":1646343434840,"results":"47","hashOfConfig":"28"},{"size":70,"mtime":1646267158247,"results":"48","hashOfConfig":"28"},{"size":73,"mtime":1646267338308,"results":"49","hashOfConfig":"28"},{"size":286,"mtime":1646270078859,"results":"50","hashOfConfig":"28"},{"size":1612,"mtime":1646302427468,"results":"51","hashOfConfig":"28"},{"size":483,"mtime":1646347909363,"results":"52","hashOfConfig":"28"},{"size":4522,"mtime":1646355583604,"results":"53","hashOfConfig":"28"},{"filePath":"54","messages":"55","suppressedMessages":"56","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"57"},"1opivgb",{"filePath":"58","messages":"59","suppressedMessages":"60","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"57"},{"filePath":"61","messages":"62","suppressedMessages":"63","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"64","messages":"65","suppressedMessages":"66","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"57"},{"filePath":"67","messages":"68","suppressedMessages":"69","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"57"},{"filePath":"70","messages":"71","suppressedMessages":"72","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"73","messages":"74","suppressedMessages":"75","errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"76","usedDeprecatedRules":"57"},{"filePath":"77","messages":"78","suppressedMessages":"79","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"57"},{"filePath":"80","messages":"81","suppressedMessages":"82","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"83","usedDeprecatedRules":"57"},{"filePath":"84","messages":"85","suppressedMessages":"86","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"87","usedDeprecatedRules":"57"},{"filePath":"88","messages":"89","suppressedMessages":"90","errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"91","usedDeprecatedRules":"57"},{"filePath":"92","messages":"93","suppressedMessages":"94","errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"95","messages":"96","suppressedMessages":"97","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"57"},{"filePath":"98","messages":"99","suppressedMessages":"100","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"57"},{"filePath":"101","messages":"102","suppressedMessages":"103","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"57"},{"filePath":"104","messages":"105","suppressedMessages":"106","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"57"},{"filePath":"107","messages":"108","suppressedMessages":"109","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"57"},{"filePath":"110","messages":"111","suppressedMessages":"112","errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"113","messages":"114","suppressedMessages":"115","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"116","usedDeprecatedRules":"57"},{"filePath":"117","messages":"118","suppressedMessages":"119","errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"120","messages":"121","suppressedMessages":"122","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"57"},{"filePath":"123","messages":"124","suppressedMessages":"125","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"57"},{"filePath":"126","messages":"127","suppressedMessages":"128","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"57"},{"filePath":"129","messages":"130","suppressedMessages":"131","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"132","usedDeprecatedRules":"57"},{"filePath":"133","messages":"134","suppressedMessages":"135","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"136","messages":"137","suppressedMessages":"138","errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"C:\\Users\\rober\\Documents\\Schoolwork\\Computer Science\\NEA\\FinalNEA\\frontend\\src\\index.js",[],[],["139","140"],"C:\\Users\\rober\\Documents\\Schoolwork\\Computer Science\\NEA\\FinalNEA\\frontend\\src\\reportWebVitals.js",[],[],"C:\\Users\\rober\\Documents\\Schoolwork\\Computer Science\\NEA\\FinalNEA\\frontend\\src\\App.js",["141"],[],"C:\\Users\\rober\\Documents\\Schoolwork\\Computer Science\\NEA\\FinalNEA\\frontend\\src\\Hooks\\useToken.js",[],[],"C:\\Users\\rober\\Documents\\Schoolwork\\Computer Science\\NEA\\FinalNEA\\frontend\\src\\Components\\ComponentImports.js",[],[],"C:\\Users\\rober\\Documents\\Schoolwork\\Computer Science\\NEA\\FinalNEA\\frontend\\src\\Pages\\PageImports.js",[],[],"C:\\Users\\rober\\Documents\\Schoolwork\\Computer Science\\NEA\\FinalNEA\\frontend\\src\\Pages\\Home.js",["142","143","144","145","146","147"],[],"import { useLocation, useNavigate, useSearchParams } from \"react-router-dom\";\r\nimport { Map, ActivityList, LoadAndSort } from \"../Components/ComponentImports\";\r\nimport \"./Home.css\";\r\nfunction getToken() {\r\n  //gets the value of token from session storage.\r\n  try {\r\n    return JSON.parse(sessionStorage.getItem(\"token\"));\r\n  } catch (e) {\r\n    sessionStorage.removeItem(\"token\");\r\n  }\r\n}\r\n\r\nfunction Home() {//if there is a validation_error then log the user out.\r\n  \r\n  const search = useLocation().search;\r\n  console.log(search);\r\n  console.log(new URLSearchParams(search).get(\"code\"));\r\n  \r\n  let scope = new URLSearchParams(search).get(\"scope\");\r\n  console.log(\"scope: \"+scope);\r\n  if (scope == \"read,activity:read_all\") {//Will check the previous url to stop 'bad requests' or clear search params.\r\n    let code = new URLSearchParams(search).get(\"code\");\r\n    var uri = window.location.toString();//from https://onlinecode.org/jquery-remove-query-string-parameter-from-url-expertphp/\r\n    var clean_uri = uri.substring(0, uri.indexOf(\"?\"));\r\n\t    window.history.replaceState({}, document.title, clean_uri);\r\n    \r\n    console.log(code);\r\n    fetch(\"https://www.strava.com/oauth/token\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        client_id: 53221,\r\n        client_secret: \"1a3a01f913e69e0868315901ebb13c27aae61dd4\", //would be hidden.\r\n        code: code,\r\n        grant_type: \"authorization_code\",\r\n      }),\r\n    })\r\n      .then((data) => data.json())\r\n      .then((res) => {\r\n        try {\r\n          \r\n          if (\"token_type\" in res){\r\n            //given token\r\n          //Save tokens in database and set stravaAuthorised to true. THen can make requests.\r\n          //PUT request to \"/user\" to update user profile.\r\n          fetch(\"http://localhost:8000/api/v1/user/\", {\r\n            method: \"PUT\",\r\n            headers: {\r\n              \"Content-Type\": \"application/json\",\r\n              \"Authorization\":getToken(),\r\n            },\r\n            body: JSON.stringify({\r\n              stravaAuthorised:true,\r\n              stravaAccessToken:res[\"access_token\"],\r\n              stravaRefreshToken:res[\"refresh_token\"],\r\n              stravaAccessTokenExpiresAt:res[\"expires_at\"]\r\n            }),\r\n          })\r\n          }\r\n        \r\n          else{//handle errors\r\n            console.log(res)\r\n          }\r\n      \r\n          \r\n          \r\n        }\r\n        catch(e){\r\n\r\n        }\r\n      \r\n    });\r\n  }\r\n  const HandleClick = function () {\r\n    //First check if the user is strava_authorised. by calling get on \"/user\"\r\n    //IF NOT strava authorised, redirected to strava login, url checked and user details modified.\r\n    fetch(\"http://localhost:8000/api/v1/user\", {\r\n      method: \"GET\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: getToken(),\r\n      },\r\n    })\r\n      .then((data) => data.json())\r\n      .then((res) => {\r\n        if (res[\"type\"] == \"user_details\") {\r\n          //successful\r\n          let userDetails = res[\"details\"];\r\n          if (!userDetails[\"stravaAuthorised\"]) {\r\n            //redirect to strava oauth page.\r\n            window.location =\r\n              \"https://www.strava.com/oauth/authorize?client_id=53221&redirect_uri=http://localhost:3000/home&response_type=code&scope=activity:read_all\";\r\n          }\r\n          else{\r\n            //get all activites from database (will happen on page load) and make request to strava.\r\n            fetch(\"http://localhost:8000/api/v1/activity/\", {\r\n              method: \"GET\",\r\n              headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                Authorization: getToken(),\r\n              },})\r\n              .then((data)=>data.json())\r\n              .then((res)=>{\r\n                console.log(res);\r\n                if(res[\"type\"] == \"success\"){\r\n                  if(res[\"activities\"].length > 0){\r\n                    //do something with the activities (add to activity list)\r\n                  }\r\n              \r\n                }\r\n                else{\r\n                  //handle error and get activites from strava and save to database.\r\n                  \r\n                }\r\n              });\r\n          }\r\n          console.log(userDetails);\r\n        } else {\r\n          //unsuccessful - handle errors\r\n          console.log(res);\r\n        }\r\n      });\r\n  };\r\n  return (\r\n    <div className=\"container-fluid\" id=\"grid-container\">\r\n      <div className=\"row show-grid h-75\">\r\n        <div className=\"col col-md-7\">\r\n          <Map />\r\n        </div>\r\n        <div className=\"col col-md-5\">\r\n          <ActivityList />\r\n        </div>\r\n      </div>\r\n      <div className=\"row\">\r\n        <div className=\"col-7\"></div>\r\n        <div className=\"col col-md-5\">\r\n          <button className=\"btn btn-primary\" onClick={HandleClick}>\r\n            Load\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\nexport default Home;\r\n","C:\\Users\\rober\\Documents\\Schoolwork\\Computer Science\\NEA\\FinalNEA\\frontend\\src\\Pages\\NotFound.js",[],[],"C:\\Users\\rober\\Documents\\Schoolwork\\Computer Science\\NEA\\FinalNEA\\frontend\\src\\Pages\\Private.js",["148"],[],"import {useOutletContext} from \"react-router-dom\";\r\n\r\nfunction Private(){\r\n    const [userLoggedIn, setUserLoggedIn] = useOutletContext();\r\n    const HandleClick = ()=>{\r\n        sessionStorage.removeItem(\"token\");\r\n        setUserLoggedIn(false);\r\n    }\r\n    return(\r\n    <>\r\n    <h1>Private</h1>\r\n    <button onClick={()=>HandleClick()}>Log out</button>\r\n    </>);\r\n}\r\nexport default Private;","C:\\Users\\rober\\Documents\\Schoolwork\\Computer Science\\NEA\\FinalNEA\\frontend\\src\\Pages\\Login.js",["149","150","151"],[],"import { useState } from \"react\";\r\nimport { Navigate, useNavigate, Link } from \"react-router-dom\";\r\n\r\nasync function loginUser(userDetails) {\r\n  return fetch(\"http://localhost:8000/api/v1/login/\", {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(userDetails),\r\n  }).then((data) => data.json());\r\n}\r\nfunction Login({ setUserLoggedIn }) {\r\n  const [username, setUsername] = useState();\r\n  const [password, setPassword] = useState();\r\n  //const navigate = useNavigate();\r\n\r\n  const HandleSubmit = async (event) => {\r\n    event.preventDefault(); //Prevents the default form action for Ajax form submissions.\r\n    const response = await loginUser({\r\n      username,\r\n      password,\r\n    });\r\n    console.log(response);\r\n    console.log(response[\"type\"] + \" \" + response[\"token\"]);\r\n    if (response[\"type\"] == \"auth_token\") {\r\n      //SaveToken here //removed the navigate as when authorise_user api is called the state of the token should change re-rendering the page.\r\n      sessionStorage.setItem(\"token\", JSON.stringify(response[\"token\"]));\r\n      setUserLoggedIn(true);\r\n    }\r\n    //====================== Do something with errors HERE ==========================\r\n  };\r\n  return (\r\n    <>\r\n      <h1>Please login</h1>\r\n      <form onSubmit={HandleSubmit}>\r\n        <label>\r\n          <p>Username</p>\r\n          <input type=\"text\" onChange={(e) => setUsername(e.target.value)} />\r\n        </label>\r\n        <label>\r\n          <p>Password</p>\r\n          <input\r\n            type=\"password\"\r\n            onChange={(e) => setPassword(e.target.value)}\r\n          />\r\n        </label>\r\n        <div>\r\n          <button type=\"submit\">Submit</button>\r\n        </div>\r\n      </form>\r\n      <p><Link to=\"/sign_up\">Or sign up here.</Link></p>\r\n    </>\r\n  );\r\n}\r\nexport default Login;\r\n","C:\\Users\\rober\\Documents\\Schoolwork\\Computer Science\\NEA\\FinalNEA\\frontend\\src\\Pages\\PrivateOutlet.js",["152","153","154","155"],[],"import { Navigate, Outlet } from \"react-router-dom\";\r\nimport { useState, useEffect, useRef } from \"react\";\r\nimport useToken from \"../Hooks/useToken.js\";\r\nimport Authentication from \"../Services/Authentication\";\r\nimport React from \"react\";\r\nimport { Login } from \"./PageImports.js\";\r\nfunction getToken() {\r\n  //gets the value of token from session storage.\r\n  try {\r\n    return JSON.parse(sessionStorage.getItem(\"token\"));\r\n  } catch (e) {\r\n    sessionStorage.removeItem(\"token\");\r\n  }\r\n}\r\n\r\nfunction PrivateOutlet(props) {\r\n  //const [userLoggedIn, setUserLoggedIn] = useState(false);\r\n  console.log(\"RENDERED\")\r\n  \r\n  useEffect(()=>{//executes after render.\r\n    Authentication.User(getToken(), props.LogUserInOrOut, props.changeUsername)\r\n  });\r\n  \r\n  \r\n  return props.userLoggedIn? (\r\n    <Outlet context={[props.userLoggedIn,props.LogUserInOrOut]}/>\r\n  ) : (\r\n    <Login setUserLoggedIn={props.LogUserInOrOut} />\r\n  );\r\n}\r\nexport default PrivateOutlet;\r\n","C:\\Users\\rober\\Documents\\Schoolwork\\Computer Science\\NEA\\FinalNEA\\frontend\\src\\Pages\\SignUp.js",["156","157","158","159"],[],"C:\\Users\\rober\\Documents\\Schoolwork\\Computer Science\\NEA\\FinalNEA\\frontend\\src\\Components\\Map.js",[],[],"C:\\Users\\rober\\Documents\\Schoolwork\\Computer Science\\NEA\\FinalNEA\\frontend\\src\\Components\\LoadAndSort.js",[],[],"C:\\Users\\rober\\Documents\\Schoolwork\\Computer Science\\NEA\\FinalNEA\\frontend\\src\\Components\\ActivityList.js",[],[],"C:\\Users\\rober\\Documents\\Schoolwork\\Computer Science\\NEA\\FinalNEA\\frontend\\src\\Components\\Navbar.js",[],[],"C:\\Users\\rober\\Documents\\Schoolwork\\Computer Science\\NEA\\FinalNEA\\frontend\\src\\Pages\\Planner.js",[],[],"C:\\Users\\rober\\Documents\\Schoolwork\\Computer Science\\NEA\\FinalNEA\\frontend\\src\\External\\InputValidationClass.js",["160","161","162","163","164","165"],[],"C:\\Users\\rober\\Documents\\Schoolwork\\Computer Science\\NEA\\FinalNEA\\frontend\\src\\Services\\Authentication.js",["166","167","168"],[],"import { useState } from \"react\";\r\nimport Login from \"../Pages/Login\";\r\nconst Authentication = {\r\n  //User : function (){//This is where the token will be validated\r\n  //const [token, setToken] = useToken();\r\n  //let token= \"dsfdsfsdf\";\r\n  //=============== Initial Validation ===================\r\n\r\n  //=============== End of intial validation =============\r\n\r\n  //return true; //true if valid, false if invalid.\r\n  User: function (currentToken, setUserLoggedIn, changeUsername) {\r\n    console.log(\"c_token: \" + currentToken);\r\n    if (currentToken == null) {\r\n      setUserLoggedIn(false);\r\n      return;\r\n    }\r\n    //console.log(\"Bearer \".concat(currentToken))\r\n    validateJWT(\"Bearer \".concat(currentToken))\r\n      .then((data) => data.json())\r\n      .then((res) => {\r\n        console.log(res);\r\n        if( res[\"type\"] == \"authorised\"){//Can trust JWT\r\n          \r\n          setUserLoggedIn(true);\r\n          changeUsername(res[\"username\"]);\r\n        }\r\n        else{\r\n          setUserLoggedIn(false);\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      })\r\n    \r\n  },\r\n};\r\n\r\nexport default Authentication;\r\n\r\nasync function validateJWT(token) {\r\n  return fetch(\"http://localhost:8000/api/v1/authorise_user/\", {\r\n    method: \"GET\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Authorization\": token,\r\n    },\r\n  });\r\n}\r\n","C:\\Users\\rober\\Documents\\Schoolwork\\Computer Science\\NEA\\FinalNEA\\frontend\\src\\Pages\\Account.js",["169","170","171","172","173","174"],[],"C:\\Users\\rober\\Documents\\Schoolwork\\Computer Science\\NEA\\FinalNEA\\frontend\\src\\Pages\\Tracking.js",[],[],"C:\\Users\\rober\\Documents\\Schoolwork\\Computer Science\\NEA\\FinalNEA\\frontend\\src\\Pages\\AccountDetails.js",[],[],"C:\\Users\\rober\\Documents\\Schoolwork\\Computer Science\\NEA\\FinalNEA\\frontend\\src\\utils\\Token.js",[],[],"C:\\Users\\rober\\Documents\\Schoolwork\\Computer Science\\NEA\\FinalNEA\\frontend\\src\\Pages\\DeleteAccount.js",["175","176","177"],[],"import { useRef } from \"react\";\r\nimport { getToken } from \"../utils/Token\";\r\nexport default function DeleteAccount(props){\r\n    const confirmation = useRef(\"\");\r\n    const HandleSubmit = (e) => {\r\n        //prevents page re-render\r\n        console.log(confirmation.current);\r\n        if(confirmation.current == \"Delete_\".concat(props.username)){//Confirmation valid, DELETE request to \"/user\"\r\n            console.log(\"DELETE\")\r\n            fetch(\"http://localhost:8000/api/v1/user/\", {\r\n                method:\"DELETE\",\r\n                headers:{\r\n                    \"Content-Type\": \"application/json\",\r\n                    \"Authorization\": \"Bearer \".concat(getToken()),\r\n                },\r\n\r\n            }).then((data)=>data.json())\r\n            .then((res) => {\r\n                console.log(res);\r\n                if(res[\"type\"] == \"delete_confirmation\"){\r\n                    sessionStorage.removeItem(\"token\");\r\n                    props.LogUserInOrOut(false); \r\n                }\r\n            })\r\n            .catch((error) => {\r\n                console.log(error);\r\n                if(error.response.status == 401) {props.LogUserInOrOut(false);}\r\n            })\r\n        }\r\n        else{//invalid confirmation\r\n\r\n        }\r\n    }\r\n    return (\r\n        <form onSubmit={e => {e.preventDefault();HandleSubmit(e);}}>\r\n            <label>Confirm by typing \"Delete_{props.username}\": </label>\r\n            <input type=\"text\" onChange={(e) => {\r\n                confirmation.current = (e.target.value);\r\n            }}/>\r\n            <input type=\"submit\" value=\"Submit\"/>\r\n        </form>\r\n    \r\n        );\r\n}","C:\\Users\\rober\\Documents\\Schoolwork\\Computer Science\\NEA\\FinalNEA\\frontend\\src\\Pages\\ResetPassword.js",[],[],"C:\\Users\\rober\\Documents\\Schoolwork\\Computer Science\\NEA\\FinalNEA\\frontend\\src\\Pages\\VerifyPasswordReset.js",["178","179","180","181","182","183","184","185","186"],[],{"ruleId":"187","replacedBy":"188"},{"ruleId":"189","replacedBy":"190"},{"ruleId":"191","severity":1,"message":"192","line":17,"column":8,"nodeType":"193","messageId":"194","endLine":17,"endColumn":16},{"ruleId":"191","severity":1,"message":"195","line":1,"column":23,"nodeType":"193","messageId":"194","endLine":1,"endColumn":34},{"ruleId":"191","severity":1,"message":"196","line":1,"column":36,"nodeType":"193","messageId":"194","endLine":1,"endColumn":51},{"ruleId":"191","severity":1,"message":"197","line":2,"column":29,"nodeType":"193","messageId":"194","endLine":2,"endColumn":40},{"ruleId":"198","severity":1,"message":"199","line":21,"column":13,"nodeType":"200","messageId":"201","endLine":21,"endColumn":15},{"ruleId":"198","severity":1,"message":"199","line":88,"column":25,"nodeType":"200","messageId":"201","endLine":88,"endColumn":27},{"ruleId":"198","severity":1,"message":"199","line":107,"column":32,"nodeType":"200","messageId":"201","endLine":107,"endColumn":34},{"ruleId":"191","severity":1,"message":"202","line":4,"column":12,"nodeType":"193","messageId":"194","endLine":4,"endColumn":24},{"ruleId":"191","severity":1,"message":"203","line":2,"column":10,"nodeType":"193","messageId":"194","endLine":2,"endColumn":18},{"ruleId":"191","severity":1,"message":"195","line":2,"column":20,"nodeType":"193","messageId":"194","endLine":2,"endColumn":31},{"ruleId":"198","severity":1,"message":"199","line":26,"column":26,"nodeType":"200","messageId":"201","endLine":26,"endColumn":28},{"ruleId":"191","severity":1,"message":"203","line":1,"column":10,"nodeType":"193","messageId":"194","endLine":1,"endColumn":18},{"ruleId":"191","severity":1,"message":"204","line":2,"column":10,"nodeType":"193","messageId":"194","endLine":2,"endColumn":18},{"ruleId":"191","severity":1,"message":"205","line":2,"column":31,"nodeType":"193","messageId":"194","endLine":2,"endColumn":37},{"ruleId":"191","severity":1,"message":"192","line":3,"column":8,"nodeType":"193","messageId":"194","endLine":3,"endColumn":16},{"ruleId":"191","severity":1,"message":"203","line":1,"column":16,"nodeType":"193","messageId":"194","endLine":1,"endColumn":24},{"ruleId":"191","severity":1,"message":"192","line":3,"column":8,"nodeType":"193","messageId":"194","endLine":3,"endColumn":16},{"ruleId":"198","severity":1,"message":"199","line":21,"column":23,"nodeType":"200","messageId":"201","endLine":21,"endColumn":25},{"ruleId":"198","severity":1,"message":"199","line":39,"column":34,"nodeType":"200","messageId":"201","endLine":39,"endColumn":36},{"ruleId":"198","severity":1,"message":"199","line":11,"column":24,"nodeType":"200","messageId":"201","endLine":11,"endColumn":26},{"ruleId":"198","severity":1,"message":"199","line":18,"column":22,"nodeType":"200","messageId":"201","endLine":18,"endColumn":24},{"ruleId":"198","severity":1,"message":"199","line":23,"column":20,"nodeType":"200","messageId":"201","endLine":23,"endColumn":22},{"ruleId":"198","severity":1,"message":"199","line":28,"column":23,"nodeType":"200","messageId":"201","endLine":28,"endColumn":25},{"ruleId":"198","severity":1,"message":"199","line":33,"column":18,"nodeType":"200","messageId":"201","endLine":33,"endColumn":20},{"ruleId":"198","severity":1,"message":"199","line":67,"column":14,"nodeType":"200","messageId":"201","endLine":67,"endColumn":16},{"ruleId":"191","severity":1,"message":"204","line":1,"column":10,"nodeType":"193","messageId":"194","endLine":1,"endColumn":18},{"ruleId":"191","severity":1,"message":"206","line":2,"column":8,"nodeType":"193","messageId":"194","endLine":2,"endColumn":13},{"ruleId":"198","severity":1,"message":"199","line":23,"column":25,"nodeType":"200","messageId":"201","endLine":23,"endColumn":27},{"ruleId":"191","severity":1,"message":"207","line":2,"column":10,"nodeType":"193","messageId":"194","endLine":2,"endColumn":14},{"ruleId":"191","severity":1,"message":"208","line":7,"column":11,"nodeType":"193","messageId":"194","endLine":7,"endColumn":24},{"ruleId":"191","severity":1,"message":"209","line":7,"column":26,"nodeType":"193","messageId":"194","endLine":7,"endColumn":42},{"ruleId":"198","severity":1,"message":"199","line":24,"column":28,"nodeType":"200","messageId":"201","endLine":24,"endColumn":30},{"ruleId":"198","severity":1,"message":"199","line":34,"column":38,"nodeType":"200","messageId":"201","endLine":34,"endColumn":40},{"ruleId":"198","severity":1,"message":"199","line":52,"column":17,"nodeType":"200","messageId":"201","endLine":52,"endColumn":19},{"ruleId":"198","severity":1,"message":"199","line":8,"column":33,"nodeType":"200","messageId":"201","endLine":8,"endColumn":35},{"ruleId":"198","severity":1,"message":"199","line":20,"column":32,"nodeType":"200","messageId":"201","endLine":20,"endColumn":34},{"ruleId":"198","severity":1,"message":"199","line":27,"column":42,"nodeType":"200","messageId":"201","endLine":27,"endColumn":44},{"ruleId":"198","severity":1,"message":"199","line":28,"column":28,"nodeType":"200","messageId":"201","endLine":28,"endColumn":30},{"ruleId":"198","severity":1,"message":"199","line":30,"column":25,"nodeType":"200","messageId":"201","endLine":30,"endColumn":27},{"ruleId":"210","severity":1,"message":"211","line":47,"column":3,"nodeType":"212","endLine":47,"endColumn":5,"suggestions":"213"},{"ruleId":"198","severity":1,"message":"199","line":50,"column":18,"nodeType":"200","messageId":"201","endLine":50,"endColumn":20},{"ruleId":"198","severity":1,"message":"199","line":59,"column":30,"nodeType":"200","messageId":"201","endLine":59,"endColumn":32},{"ruleId":"198","severity":1,"message":"214","line":62,"column":34,"nodeType":"200","messageId":"201","endLine":62,"endColumn":36},{"ruleId":"198","severity":1,"message":"199","line":75,"column":33,"nodeType":"200","messageId":"201","endLine":75,"endColumn":35},{"ruleId":"198","severity":1,"message":"199","line":107,"column":19,"nodeType":"200","messageId":"201","endLine":107,"endColumn":21},{"ruleId":"198","severity":1,"message":"199","line":112,"column":17,"nodeType":"200","messageId":"201","endLine":112,"endColumn":19},"no-native-reassign",["215"],"no-negated-in-lhs",["216"],"no-unused-vars","'useToken' is defined but never used.","Identifier","unusedVar","'useNavigate' is defined but never used.","'useSearchParams' is defined but never used.","'LoadAndSort' is defined but never used.","eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","'userLoggedIn' is assigned a value but never used.","'Navigate' is defined but never used.","'useState' is defined but never used.","'useRef' is defined but never used.","'Login' is defined but never used.","'Link' is defined but never used.","'optionClicked' is assigned a value but never used.","'setOptionClicked' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'searchParams' and 'username'. Either include them or remove the dependency array.","ArrayExpression",["217"],"Expected '!==' and instead saw '!='.","no-global-assign","no-unsafe-negation",{"desc":"218","fix":"219"},"Update the dependencies array to be: [searchParams, username]",{"range":"220","text":"221"},[1604,1606],"[searchParams, username]"]